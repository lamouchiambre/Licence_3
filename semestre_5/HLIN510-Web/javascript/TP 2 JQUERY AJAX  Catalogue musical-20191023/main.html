<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <style>
      body { font-size: 18; font-weight: bold; }
      img { width: 80px; height: 80px;}
      .horizontal { float: left; margin: 10px; list-style: none; }
    </style>
     <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
   <!-- <script src="jquery-3.4.1.min.js" type="text/javascript"></script> -->
    <script type="text/javascript">
      // On répertorie dans un objet les listes déjà chargées
      // en valeurs : 1 si la liste est affichée, 0 sinon
      var listeChargees = {};
      function generationHTML(objet) {
        // $.getJSON("JSON/" + objet.lien+".json", function(data){
        //   $.each(data, function(indice, objet){
        //     html="<li class='horizontal'>"+ objet.nom+"<img id=album_"+objet.nom+ "scr=IMAGE/"+objet.nom"</li";
        //     html +="<li";
        //     console.log("<li id='nom'>"+ objet.nom+"</li");
        //   });
        // });
        // return html;
        var html = "";
        if (objet.image){
            html+= "<li class ='horizontal'>"+objet.nom+"\u00a0\u00a0" ;
            html+="<img id='"+objet.lien+"' src='IMAGES/"+objet.image+"' width = '50' height='50'>";
            html+="<img id='"+objet.lien+"'> </ul> </li>" ;

        }
        else{ html+= "<li>"+objet.nom+"</li>";}
        return html;
      }
  
      // function ouvertureFermeture() {
      //   var id = $(this).attr('id');
      //   if (listeChargees.hasOwnProperty("#liste_"+id)) {
      //     if (listeChargees["#liste_"+id] == 1) { // la liste est affichée, on la désaffiche
      //     //...
      //     }
      //   else { // la liste est désaffichée, on l’affiche
      //     //...
      //     }
      //   }
      //   else {
      //     // la liste n’est pes encore chargée -> $.getJSON()
      //     //...
      //     }
      //   };
      //   alert("bonjout");
      $().ready(function() {
        // création de la liste de plus haut niveau
        $("body").append("<ul id='listePrincipale' />");
        $.getJSON("JSON/chanteurs.json", function(data) {
          $.each(data, function(indice, objet) {
            let html = generationHTML(objet);
            console.log(objet.lien);
            $("#listePrincipale").append(html);
            //$(document.body).on('click', '#'+objet.lien, ouvertureFermeture);
            });
          
           
           });
          
        });
    </script>
  </head> <body>
    lalal
  </body>
</html>
