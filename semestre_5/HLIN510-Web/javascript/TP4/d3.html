<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>D3.js</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <script>
        function creeHexagone(rayon) {
            var points = new Array();
            for (var i = 0; i < 6; ++i) {
                var angle = i * 60 *Math.PI/180;
                //console.log(x +", "+y +", "+i);
                var x = Math.sin(angle) * rayon;
                var y = -Math.cos(angle) * rayon;
                x = Math.round(x*100)/100;
                y = Math.round(y*100)/100;
                
                points.push( [x, y]); // ajouter à points une liste
                // contenant l’abscisse et l’ordonnée du point
                // arrondies à deux décimales
                }
            return points;
            }

            var hexa = creeHexagone(300);
            console.dir(hexa);
        </script>
        <div id = "damier"></div>
        <script>
            function genereDamier(rayon, nbLignes, nbColonnes) {
                d3.select("#damier").append("svg").attr("width", 500).attr("height", 500);
                var hexagone = creeHexagone(rayon);
                
                // for (k in hexagone) {
                //     console.dir(k);
                    
                // }
                // hexagone.forEach(k => {
                //     console.dir(k);
                // });
                for (let ligne=0; ligne < nbLignes; ligne++) {
                    for (let colonne=0; colonne < nbColonnes; colonne++) {
                        let listeCoord = "";
                        let x=0;
                        let y=0;
                        hexagone.forEach(h => {
                        // Si ligne impair, décalage des hexagones d’un rayon
                            if (ligne % 2){ 
                                x = 2*colonne*(rayon*1)+ h[0]+ rayon;}
                            else {
                                x = 2*colonne*(rayon*1)+ h[0];} 
                            y = h[1] + 2*ligne*rayon; // calcul de l’ordonnée
                            listeCoord += x+","+y+" "; // ajout des coordonnées du point (abscisse et ordonnée séparés par une virgule)
                            d3.select("svg").append("polygon").attr("points", listeCoord).attr("fill", "yellow").attr("stroke","black");
                        });
                    }
                }
                console.dir(listeCoord);
                d3.select("svg").append("polygon").attr("points", listeCoord).attr("fill", "yellow");
            }
            var dam = genereDamier(50, 4, 4);

        </script>
</body>
</html>